<h1>Expense Tracker</h1>

<div class="mt-3">
  <label>
    Include hidden
    <input type="checkbox" [(ngModel)]="includeHiddenExpenses" />
  </label>
</div>

<table class="table table-striped table-hover mt-3">
  <thead class="table-dark">
    <tr>
      <th>Category</th>
      <th>Payment Method</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Hide</th>
      <th>Add Expense</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <select [(ngModel)]="newExpense.category.id" class="form-control">
          <option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </option>
        </select>
      </td>
      <td>
        <select [(ngModel)]="newExpense.paymentMethod.id" class="form-control">
          <option *ngFor="let method of paymentMethods" [value]="method.id">
            {{ method.name }}
          </option>
        </select>
      </td>
      <td>
        <input type="text" [(ngModel)]="newExpense.description" class="form-control" placeholder="Enter description" />
      </td>
      <td style="width: 100px;">
        <input type="number" [(ngModel)]="newExpense.amount" class="form-control" placeholder="Enter amount" />
      </td>
      <td style="width: 80px; text-align: center;">
        <input type="checkbox" [(ngModel)]="newExpense.enabled" />
      </td>
      <td>
        <button class="btn btn-success" (click)="addExpense(newExpense)">Add Expense</button>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-striped table-hover mt-3">
  <thead class="table-dark">
    <tr>
      <th>Category</th>
      <th>Payment Method</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Hide</th>
      <th>Permanently Delete</th>
    </tr>
  </thead>
  <tbody>
    <!-- PIPE (see todo) -->
    <tr *ngFor="let expense of expenses | hiddenExpenses: includeHiddenExpenses">
      <td>
        <select [(ngModel)]="expense.category.id" (change)="updateExpense(expense)" class="form-control">
          <option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </option>
        </select>
      </td>
      <td>
        <select [(ngModel)]="expense.paymentMethod.id" (change)="updateExpense(expense)" class="form-control">
          <option *ngFor="let method of paymentMethods" [value]="method.id">
            {{ method.name }}
          </option>
        </select>
      </td>
      <td>
        <input type="text" [(ngModel)]="expense.description" (change)="updateExpense(expense)" class="form-control" />
      </td>
      <td style="width: 100px;">
        <input type="number" [(ngModel)]="expense.amount" (change)="updateExpense(expense)" class="form-control" />
      </td>
      <td style="width: 80px; text-align: center;">
        <input type="checkbox" [(ngModel)]="expense.enabled" (change)="updateExpense(expense)" />
      </td>
      <td>
        <button class="btn btn-danger" (click)="deleteExpense(expense.id)">X</button>
      </td>
    </tr>
  </tbody>
</table>
